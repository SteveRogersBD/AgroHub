### Comment Service API Examples
### Base URL: http://localhost:8085/api/comments (direct) or http://localhost:8080/api/comments (via gateway)

### Variables
@baseUrl = http://localhost:8080/api/comments
@accessToken = YOUR_JWT_TOKEN_HERE

### 1. Create a comment on a post
POST {{baseUrl}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "postId": 1,
  "content": "Great post! I totally agree with your perspective."
}

### Expected Response (201 Created):
# {
#   "id": 1,
#   "postId": 1,
#   "userId": 1,
#   "username": "johndoe",
#   "userAvatarUrl": "https://example.com/avatars/johndoe.jpg",
#   "content": "Great post! I totally agree with your perspective.",
#   "createdAt": "2024-01-15T10:30:00",
#   "updatedAt": "2024-01-15T10:30:00"
# }

### 2. Create another comment
POST {{baseUrl}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "postId": 1,
  "content": "Thanks for sharing this! Very insightful. üëç"
}

### Expected Response (201 Created):
# {
#   "id": 2,
#   "postId": 1,
#   "userId": 1,
#   "username": "johndoe",
#   "userAvatarUrl": "https://example.com/avatars/johndoe.jpg",
#   "content": "Thanks for sharing this! Very insightful. üëç",
#   "createdAt": "2024-01-15T10:35:00",
#   "updatedAt": "2024-01-15T10:35:00"
# }

### 3. Create a comment with empty content (should fail)
POST {{baseUrl}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "postId": 1,
  "content": ""
}

### Expected Response (400 Bad Request):
# {
#   "timestamp": "2024-01-15T10:40:00",
#   "status": 400,
#   "error": "Bad Request",
#   "message": "Content is required",
#   "path": "/api/comments"
# }

### 4. Create a comment on non-existent post (should fail)
POST {{baseUrl}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "postId": 99999,
  "content": "This post doesn't exist"
}

### Expected Response (404 Not Found):
# {
#   "timestamp": "2024-01-15T10:45:00",
#   "status": 404,
#   "error": "Not Found",
#   "message": "Post not found",
#   "path": "/api/comments"
# }

### 5. Get comments for a post
GET {{baseUrl}}/post/1?page=0&size=10
Authorization: Bearer {{accessToken}}

### Expected Response (200 OK):
# {
#   "content": [
#     {
#       "id": 1,
#       "postId": 1,
#       "userId": 1,
#       "username": "johndoe",
#       "userAvatarUrl": "https://example.com/avatars/johndoe.jpg",
#       "content": "Great post! I totally agree with your perspective.",
#       "createdAt": "2024-01-15T10:30:00",
#       "updatedAt": "2024-01-15T10:30:00"
#     },
#     {
#       "id": 2,
#       "postId": 1,
#       "userId": 1,
#       "username": "johndoe",
#       "userAvatarUrl": "https://example.com/avatars/johndoe.jpg",
#       "content": "Thanks for sharing this! Very insightful. üëç",
#       "createdAt": "2024-01-15T10:35:00",
#       "updatedAt": "2024-01-15T10:35:00"
#     }
#   ],
#   "pageable": {
#     "pageNumber": 0,
#     "pageSize": 10
#   },
#   "totalElements": 2,
#   "totalPages": 1,
#   "last": true
# }

### 6. Update a comment
PUT {{baseUrl}}/1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "content": "Great post! I totally agree with your perspective. Edit: Added more thoughts after reading again."
}

### Expected Response (200 OK):
# {
#   "id": 1,
#   "postId": 1,
#   "userId": 1,
#   "username": "johndoe",
#   "userAvatarUrl": "https://example.com/avatars/johndoe.jpg",
#   "content": "Great post! I totally agree with your perspective. Edit: Added more thoughts after reading again.",
#   "createdAt": "2024-01-15T10:30:00",
#   "updatedAt": "2024-01-15T11:00:00"
# }

### 7. Attempt to update another user's comment (should fail)
PUT {{baseUrl}}/2
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "content": "Hacked comment"
}

### Expected Response (403 Forbidden):
# {
#   "timestamp": "2024-01-15T11:05:00",
#   "status": 403,
#   "error": "Forbidden",
#   "message": "You can only update your own comments",
#   "path": "/api/comments/2"
# }

### 8. Delete a comment
DELETE {{baseUrl}}/1
Authorization: Bearer {{accessToken}}

### Expected Response (204 No Content)

### 9. Attempt to delete another user's comment (should fail)
DELETE {{baseUrl}}/3
Authorization: Bearer {{accessToken}}

### Expected Response (403 Forbidden):
# {
#   "timestamp": "2024-01-15T11:10:00",
#   "status": 403,
#   "error": "Forbidden",
#   "message": "You can only delete your own comments",
#   "path": "/api/comments/3"
# }

### 10. Get comments with pagination (page 2)
GET {{baseUrl}}/post/1?page=1&size=5
Authorization: Bearer {{accessToken}}

### Expected Response (200 OK):
# Returns second page of comments (if available)

### 11. Get comments for post with no comments
GET {{baseUrl}}/post/999?page=0&size=10
Authorization: Bearer {{accessToken}}

### Expected Response (200 OK):
# {
#   "content": [],
#   "pageable": {
#     "pageNumber": 0,
#     "pageSize": 10
#   },
#   "totalElements": 0,
#   "totalPages": 0,
#   "last": true
# }

### 12. Create a comment exceeding character limit (should fail)
POST {{baseUrl}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "postId": 1,
  "content": "Lorem ipsum dolor sit amet... [2001 characters]"
}

### Expected Response (400 Bad Request):
# {
#   "timestamp": "2024-01-15T11:15:00",
#   "status": 400,
#   "error": "Bad Request",
#   "message": "Content must not exceed 2000 characters",
#   "path": "/api/comments"
# }
